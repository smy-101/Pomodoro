(this.webpackJsonptomato=this.webpackJsonptomato||[]).push([[0],{138:function(t,e,n){},162:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(0),r=n.n(o),i=n(25),s=n.n(i),c=(n(138),n(179)),d=n(175),u=n(17),p=n.n(u),l=n(33),h=n(18),j=n(19),f=n(21),b=n(20),x=n(15),m=n(177),O=n(171),v=n(41),g=n(115),y=n.n(g),T=n(92),w="";w="/Pomodoro";var k=Object(T.a)({basename:w}),C=y.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"kdfrtgAEVJ1NhR9c8D9eb8Y3","t-app-secret":"9A5GPDaTYomgui3FHc6ne2Mw"}});C.interceptors.request.use((function(t){var e=localStorage.getItem("x-token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return console.error(t),Promise.reject(t)})),C.interceptors.response.use((function(t){return t.headers["x-token"]&&localStorage.setItem("x-token",t.headers["x-token"]),t}),(function(t){return 401===t.response.status&&(console.log("\u91cd\u5b9a\u5411"),k.push("/login")),Promise.reject(t)}));var D=C,N=n(16),I=n(168);function M(){var t=Object(x.a)(["\n  max-width: 500px;\n  margin: auto;\n  padding: 50px 0;\n  >*{\n    margin: 10px 0;\n  }\n  >h1{\n    text-align: center;\n  }\n  >button{\n    width: 100%;\n  }\n"]);return M=function(){return t},t}var _=N.a.div(M()),Y=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).onChange=function(t,e){var n={};n[t]=e,a.setState(n)},a.submit=Object(l.a)(p.a.mark((function t(){var e,n,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.state,n=e.account,o=e.password,t.prev=1,t.next=4,D.post("sign_in/user",{account:n,password:o});case 4:console.log("success"),a.props.history.push("/"),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),a.state={account:"",password:""},a}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=this.state,n=e.account,o=e.password;return Object(a.jsxs)(_,{children:[Object(a.jsx)("h1",{children:"\u756a\u8304TODO\u7528\u6237\u767b\u5f55"}),Object(a.jsx)(O.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",allowClear:!0,prefix:Object(a.jsx)(m.a,{}),value:n,onChange:function(e){return t.onChange("account",e.target.value)}}),Object(a.jsx)(O.a.Password,{value:o,onChange:function(e){return t.onChange("password",e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),Object(a.jsx)(v.a,{type:"primary",onClick:this.submit,children:"\u767b\u5f55"}),Object(a.jsxs)("p",{children:["\u5982\u679c\u60a8\u672a\u6ce8\u518c\u5e10\u53f7\uff0c\u8bf7\u5728\u6b64",Object(a.jsx)(I.a,{to:"/signup",children:"\u6ce8\u518c"})]})]})}}]),n}(r.a.Component);function A(){var t=Object(x.a)(["\n  max-width: 500px;\n  margin: auto;\n  padding: 50px 0;\n  >*{\n    margin: 10px 0;\n  }\n  >h1{\n    text-align: center;\n  }\n  >button{\n    width: 100%;\n  }\n"]);return A=function(){return t},t}var S=N.a.div(A()),P=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).onChangeAccount=function(t){console.log(t.target.value),a.setState({account:t.target.value})},a.onChangePassword=function(t){a.setState({password:t.target.value})},a.onChangePasswordConformation=function(t){a.setState({passwordConformation:t.target.value})},a.submit=Object(l.a)(p.a.mark((function t(){var e,n,o,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.state,n=e.account,o=e.password,r=e.passwordConformation,t.prev=1,t.next=4,D.post("sign_up/user",{account:n,password:o,password_confirmation:r});case 4:console.log("success"),a.props.history.push("/"),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),a.state={account:"",password:"",passwordConformation:""},a}return Object(j.a)(n,[{key:"render",value:function(){var t=this.state,e=t.account,n=t.password,o=t.passwordConformation;return Object(a.jsxs)(S,{children:[Object(a.jsx)("h1",{children:"\u756a\u8304TODO\u7528\u6237\u6ce8\u518c"}),Object(a.jsx)(O.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",allowClear:!0,prefix:Object(a.jsx)(m.a,{}),value:e,onChange:this.onChangeAccount}),Object(a.jsx)(O.a.Password,{value:n,onChange:this.onChangePassword,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}),Object(a.jsx)(O.a.Password,{value:o,onChange:this.onChangePasswordConformation,placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801"}),Object(a.jsx)(v.a,{type:"primary",onClick:this.submit,children:"\u6ce8\u518c"}),Object(a.jsxs)("p",{children:["\u5982\u679c\u60a8\u5df2\u6709\u5e10\u53f7\uff0c\u8bf7\u5728\u6b64",Object(a.jsx)(I.a,{to:"/login",children:"\u767b\u5f55"})]})]})}}]),n}(r.a.Component),E=n(29),F=n(125),U=n(170),H=n(174),K=n(180),z=n(178);var B=Object(a.jsx)(U.a,{onClick:function(t){F.b.info("Click on menu item."),console.log("click",t)},children:Object(a.jsx)(U.a.Item,{onClick:function(){localStorage.setItem("x-token",""),k.push("/login")},icon:Object(a.jsx)(K.a,{}),children:"\u6ce8\u9500"},"2")}),L=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this.props.name;return Object(a.jsx)("div",{children:Object(a.jsx)(H.a,{overlay:B,children:Object(a.jsxs)("span",{children:[t,Object(a.jsx)(z.a,{style:{marginLeft:8}})]})})})}}]),n}(r.a.Component),W=n(30),R=n(181),J="ADD_TODO",q="INIT_TODOS",G="UPDATE_TODO",V="EDIT_TODO",Q="ADD_TOMATO",X="INIT_TOMATOES",Z="UPDATE_TOMATO",$="EDIT_TOMATO",tt=function(t){return{type:q,payload:t}},et=function(t){return{type:G,payload:t}},nt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).onKeyUp=function(t){13===t.keyCode&&""!==a.state.description&&a.postTodo()},a.postTodo=Object(l.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.post("todos",{description:a.state.description});case 3:e=t.sent,a.props.addTodo(e.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:a.setState({description:""});case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),a.state={description:""},a}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=this.state.description,n=e?Object(a.jsx)(R.a,{onClick:this.postTodo}):Object(a.jsx)("span",{});return Object(a.jsx)("div",{className:"TodoInput",children:Object(a.jsx)(O.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:n,value:e,onKeyUp:this.onKeyUp,onChange:function(e){t.setState({description:e.target.value})}})})}}]),n}(r.a.Component),at={addTodo:function(t){return{type:J,payload:t}},initTodos:tt},ot=Object(W.b)((function(t,e){return Object(E.a)({},e)}),at)(nt),rt=n(173),it=n(176),st=n(5),ct=n.n(st);function dt(){var t=Object(x.a)(["\n  display: flex;\n  padding: 8px 0 8px 8px;\n  align-items: center;\n  border-bottom: 1px solid #ddd;\n\n  &:hover {\n    background: #f9f9f9\n  }\n\n  &:first-child {\n    border-top: 1px solid #ddd;\n  }\n\n  &.editing {\n    background: #fff3d2\n  }\n\n  &.completed {\n    > .text {\n      text-decoration: line-through;\n      color: #a9a9a9;\n    }\n  }\n\n  > .editing, > .text {\n    padding: 0 8px;\n    flex: 1;\n  }\n\n  > .editing {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    > input {\n      border: 0;\n      outline: none;\n      background: transparent;\n    }\n\n    > .iconWrapper > .anticon {\n      margin-left: 4px;\n      color: #a9a9a9;\n      cursor: pointer;\n    }\n  }\n"]);return dt=function(){return t},t}var ut=N.a.div(dt()),pt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).updateTodo=function(){var t=Object(l.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.completed&&(e.completed_at=new Date),t.prev=1,t.next=4,D.put("todos/".concat(a.props.id),e);case 4:n=t.sent,a.props.updateTodo(n.data.resource),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),a.editTodo=function(){a.props.editTodo(a.props.id)},a.onKeyUp=function(t){13===t.keyCode&&""!==a.state.editText&&a.updateTodo({description:a.state.editText})},a.state={editText:a.props.description},a}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=Object(a.jsxs)("div",{className:"editing",children:[Object(a.jsx)("input",{type:"text",value:this.state.editText,onChange:function(e){return t.setState({editText:e.target.value})},onKeyUp:this.onKeyUp}),Object(a.jsxs)("div",{className:"iconWrapper",children:[Object(a.jsx)(R.a,{}),Object(a.jsx)(it.a,{onClick:function(){return t.updateTodo({deleted:!0})}})]})]}),n=Object(a.jsx)("span",{className:"text",onDoubleClick:this.editTodo,children:this.props.description}),o=ct()({TodoItem:!0,editing:this.props.editing,completed:this.props.completed});return Object(a.jsxs)(ut,{className:o,children:[Object(a.jsx)(rt.a,{checked:this.props.completed,onChange:function(e){return t.updateTodo({completed:e.target.checked})}}),this.props.editing?e:n]})}}]),n}(r.a.Component),lt={editTodo:function(t){return{type:V,payload:t}},updateTodo:et},ht=Object(W.b)((function(t,e){return Object(E.a)({},e)}),lt)(pt),jt=n(72);function ft(){var t=Object(x.a)(["\n  padding: 16px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  width: calc(50% - 8px);\n  box-shadow: 0 2px 0 rgba(225, 225, 225, .2);\n  background: #fff;\n\n  > main {\n    margin-top: 16px;\n    height: 200px;\n    overflow-y: scroll;\n  }\n  >main::-webkit-scrollbar {\n    display: none;\n  }\n"]);return ft=function(){return t},t}var bt=N.a.div(ft()),xt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=function(){return 0===t.unCompletedTodos.length?Object(a.jsx)(jt.a,{}):t.unCompletedTodos.map((function(t){return Object(a.jsx)(ht,Object(E.a)({},t),t.id)}))};return Object(a.jsxs)(bt,{className:"Todos",children:[Object(a.jsx)(ot,{}),Object(a.jsx)("main",{children:Object(a.jsx)(e,{})})]})}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(t){return!t.deleted}))}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter((function(t){return!t.completed}))}}]),n}(r.a.Component),mt=Object(W.b)((function(t,e){return Object(E.a)({todos:t.todos},e)}))(xt),Ot=n(172),vt=n(97);function gt(){var t=Object(x.a)(["\n  position: relative;\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  padding: 4px 0;\n  overflow: hidden;\n\n  > span {\n    position: relative;\n    z-index: 1;\n  }\n\n  > .progress {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    background: #e9e9e9;\n    box-shadow: 1px 0 0 0 rgba(225, 225, 225, 1);\n    z-index: 0;\n  }\n"]);return gt=function(){return t},t}var yt,Tt=N.a.div(gt()),wt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={countDown:a.props.timer},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=this;yt=setInterval((function(){var e=t.state.countDown;t.setState({countDown:e-1e3}),document.title="".concat(t.countDown," - \u756a\u8304\u65f6\u95f4"),e<1e3&&(document.title="\u756a\u8304\u65f6\u95f4",t.props.onFinish(),clearInterval(yt))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(yt)}},{key:"render",value:function(){var t=1-this.state.countDown/this.props.duration;return Object(a.jsxs)(Tt,{children:[Object(a.jsx)("span",{children:this.countDown}),Object(a.jsx)("div",{className:"progress",style:{width:"".concat(100*t,"%")}})]})}},{key:"countDown",get:function(){var t=Math.floor(this.state.countDown/1e3/60),e=Math.floor(this.state.countDown/1e3%60);return"".concat(t<10?"0".concat(t):t,":").concat(e<10?"0".concat(e):e)}}]),n}(r.a.Component);function kt(){var t=Object(x.a)(["\n  .countDownWrapper,.inputWrapper{\n    position: relative;\n  }\n  .start{\n    width: 100%;\n  }\n  .abort{\n    position: absolute;\n    right: -6px;top: -6px;\n    background: #fff;\n    cursor: pointer;\n  }\n"]);return kt=function(){return t},t}var Ct=N.a.div(kt()),Dt=Ot.a.confirm,Nt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).onKeyUp=function(t){13===t.keyCode&&""!==a.state.description&&(a.updateTomato({description:a.state.description,ended_at:new Date}),a.setState({description:""}))},a.abortTomato=function(){a.updateTomato({aborted:!0}),document.title="\u756a\u8304APP"},a.updateTomato=function(){var t=Object(l.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.put("tomatoes/".concat(a.props.unfinishedTomato.id),e);case 3:n=t.sent,a.props.updateTomato(n.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),a.onFinish=function(){a.forceUpdate()},a.showConfirm=function(){Dt({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",onOk:function(){a.abortTomato()},onCancel:function(){console.log("\u53d6\u6d88")},cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a"})},a.state={description:""},a}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=Object(a.jsx)("div",{});if(void 0===this.props.unfinishedTomato)e=Object(a.jsx)(v.a,{className:"start",onClick:function(){return t.props.startTomato()},children:"\u5f00\u59cb\u756a\u8304"});else{var n=Date.parse(this.props.unfinishedTomato.started_at),o=this.props.unfinishedTomato.duration,r=(new Date).getTime();if(r-n>o)e=Object(a.jsxs)("div",{className:"inputWrapper",children:[Object(a.jsx)(O.a,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u5b8c\u6210\u7684\u4efb\u52a1",value:this.state.description,onChange:function(e){return t.setState({description:e.target.value})},onKeyUp:function(e){return t.onKeyUp(e)}}),Object(a.jsx)(vt.a,{className:"abort",onClick:this.showConfirm})]});else if(r-n<o){var i=o-r+n;e=Object(a.jsxs)("div",{className:"countDownWrapper",children:[Object(a.jsx)(wt,{timer:i,onFinish:this.onFinish,duration:o}),Object(a.jsx)(vt.a,{className:"abort",onClick:this.showConfirm})]})}}return Object(a.jsx)(Ct,{children:e})}}]),n}(r.a.Component),It=function(t){return{type:Z,payload:t}},Mt=n(31),_t=n.n(Mt);function Yt(){var t=Object(x.a)(["\n  margin-top: 16px;\n  border-top: 1px solid #ddd;\n\n  .dailyTomatoes {\n    padding-top: 16px;\n\n    .title {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 4px;\n\n      .dateTime {\n        color: #999;\n        font-size: 16px;\n      }\n\n      .finishedCount {\n        color: #666;\n        font-size: 12px;\n      }\n    }\n\n    .TomatoItem {\n      margin: 4px 0;\n      font-size: 14px;\n\n      .timeRange {\n        color: #999999;\n      }\n\n      .description {\n        color: #222222;\n        margin-left: 8px;\n      }\n    }\n  }\n"]);return Yt=function(){return t},t}var At=N.a.div(Yt()),St=function(t){return Object(a.jsxs)("div",{className:"TomatoItem",children:[Object(a.jsxs)("span",{className:"timeRange",children:[_t()(t.started_at).format("HH:mm")," - ",_t()(t.ended_at).format("HH:mm")]}),Object(a.jsx)("span",{className:"description",children:t.description})]})},Pt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=this.dates.map((function(e){var n=t.props.finishedTomato[e];return Object(a.jsxs)("div",{className:"dailyTomatoes",children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("span",{className:"dateTime",children:e}),Object(a.jsxs)("span",{className:"finishedCount",children:["\u5b8c\u6210\u4e86",n.length,"\u4e2a\u756a\u8304\u65f6\u95f4"]})]}),Object(a.jsx)("div",{children:n.map((function(t){return Object(a.jsx)(St,Object(E.a)({},t),t.id)}))})]},e)}));return Object(a.jsx)(At,{children:e})}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomato).sort((function(t,e){return Date.parse(e)-Date.parse(t)})).splice(0,3)}}]),n}(r.a.Component),Et=n(49),Ft=n.n(Et);function Ut(){var t=Object(x.a)(["\n height: 20px;\n"]);return Ut=function(){return t},t}function Ht(){var t=Object(x.a)(["\n  padding: 16px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  width: calc(50% - 8px);\n  box-shadow: 0 2px 0 rgba(225, 225, 225, .2);\n  background: #fff;\n  height: 282px;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]);return Ht=function(){return t},t}var Kt=N.a.div(Ht()),zt=N.a.div(Ut()),Bt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).startTomato=Object(l.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.post("tomatoes",{duration:15e5});case 3:n=e.sent,t.props.addTomato(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),t}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(Kt,{children:[Object(a.jsx)(Nt,{startTomato:this.startTomato,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),0!==this.props.tomatoes.filter((function(t){return t.description&&t.ended_at&&!t.aborted})).length?Object(a.jsx)(Pt,{finishedTomato:this.finishedTomato}):Object(a.jsxs)("div",{children:[Object(a.jsx)(zt,{}),Object(a.jsx)(jt.a,{})]})]})}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter((function(t){return!t.description&&!t.ended_at&&!t.aborted}))[0]}},{key:"finishedTomato",get:function(){var t=this.props.tomatoes.filter((function(t){return t.description&&t.ended_at&&!t.aborted}));return Ft.a.groupBy(t,(function(t){return _t()(t.started_at).format("YYYY-MM-DD")}))}}]),n}(r.a.Component),Lt={addTomato:function(t){return{type:Q,payload:t}},updateTomato:It},Wt=Object(W.b)((function(t,e){return Object(E.a)({tomatoes:t.tomatoes},e)}),Lt)(Bt),Rt=n(169);function Jt(){var t=Object(x.a)(["\n  padding: 8px;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n\n  .text {\n    .time {\n      color: #999;\n      margin-right: 8px;\n    }\n\n    .description {\n      color: #222222;\n    }\n  }\n\n  .action {\n    display: none;\n\n    span {\n      color: deepskyblue;\n      cursor: pointer;\n\n      &:first-child {\n        margin-right: 4px;\n      }\n    }\n\n  }\n\n  &:hover {\n    background: #f4f4f4;\n\n    > .action {\n      display: block;\n    }\n  }\n"]);return Jt=function(){return t},t}var qt=N.a.div(Jt()),Gt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).updateTodo=function(){var e=Object(l.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.put("todos/".concat(t.props.todo.id),n);case 3:a=e.sent,t.props.updateTodo(a.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),t}return Object(j.a)(n,[{key:"render",value:function(){var t,e,n,o=this;return"finished"===this.props.itemType?(e="HH:mm",n=this.props.todo.updated_at,t=Object(a.jsxs)("div",{className:"action",children:[Object(a.jsx)("span",{onClick:function(){return o.updateTodo({completed:!1})},children:"\u6062\u590d"}),Object(a.jsx)("span",{onClick:function(){return o.updateTodo({deleted:!0})},children:"\u5220\u9664"})]})):"deleted"===this.props.itemType&&(e="YYYY-MM-DD",n=this.props.todo.created_at,t=Object(a.jsx)("div",{className:"action",children:Object(a.jsx)("span",{onClick:function(){return o.updateTodo({deleted:!1})},children:"\u6062\u590d"})})),Object(a.jsxs)(qt,{className:"TodoHistoryTodoItem",id:"TodoHistoryTodoItem",children:[Object(a.jsxs)("div",{className:"text",children:[Object(a.jsx)("span",{className:"time",children:_t()(n).format(e)}),Object(a.jsx)("span",{className:"description",children:this.props.todo.description})]}),t]})}}]),n}(r.a.Component),Vt={updateTodo:et},Qt=Object(W.b)((function(t,e){return Object(E.a)({},e)}),Vt)(Gt);function Xt(){var t=Object(x.a)(["\n  margin-bottom: 100px;\n  max-height: 500px;\n  overflow-y: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  .dailyTodos {\n    padding: 16px;\n    border: 1px solid #DDD;\n    border-radius: 4px;\n    margin-bottom: 8px;\n    display: flex;\n\n    .summary {\n      width: 100px;\n      margin-right: 8px;\n\n      .date {\n        span:first-child {\n          margin-right: 4px;\n          color: #222222;\n        }\n\n        span:last-child {\n          color: #888;\n          font-size: 12px;\n        }\n      }\n\n      .finishedCount {\n        font-size: 14px;\n        color: #888;\n      }\n    }\n\n    .todoList {\n      flex: 1;\n    }\n  }\n"]);return Xt=function(){return t},t}var Zt=N.a.div(Xt()),$t=Rt.a.TabPane,te=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=this.finishedDates.map((function(e){return Object(a.jsxs)("div",{className:"dailyTodos",children:[Object(a.jsxs)("div",{className:"summary",children:[Object(a.jsx)("p",{className:"date",children:Object(a.jsx)("span",{children:e})}),Object(a.jsxs)("p",{className:"finishedCount",children:["\u5b8c\u6210\u4e86",t.dailyFinishedTodos[e].length,"\u4e2a\u4efb\u52a1"]})]}),Object(a.jsx)("div",{className:"todoList",children:0!==t.finishedTodos.length?t.dailyFinishedTodos[e].map((function(t){return Object(a.jsx)(Qt,{todo:t,itemType:"finished"},t.id)})):Object(a.jsx)(jt.a,{})})]},e)})),n=this.deletedTodos.map((function(e){return 0!==t.deletedTodos.length?Object(a.jsx)(Qt,{todo:e,itemType:"deleted"},e.id):Object(a.jsx)(jt.a,{})}));return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(Rt.a,{defaultActiveKey:"1",children:[Object(a.jsx)($t,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",children:Object(a.jsx)(Zt,{children:e})},"1"),Object(a.jsx)($t,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",children:Object(a.jsx)(Zt,{children:n})},"2")]})})}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(t){return t.completed&&!t.deleted}))}},{key:"deletedTodos",get:function(){return this.props.todos.filter((function(t){return t.deleted}))}},{key:"dailyFinishedTodos",get:function(){return Ft.a.groupBy(this.finishedTodos,(function(t){return _t()(t.updated_at).format("YYYY-MM-DD")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort((function(t,e){return Date.parse(e)-Date.parse(t)}))}}]),n}(r.a.Component),ee=Object(W.b)((function(t,e){return Object(E.a)({todos:t.todos},e)}))(te);function ne(){var t=Object(x.a)(["\n  border: 1px black solid;\n  outline: none;\n  background: white;\n"]);return ne=function(){return t},t}function ae(){var t=Object(x.a)(["\n  padding: 8px;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n  \n  >div>.time{\n    color: #999;\n    margin-right: 8px;\n  }\n\n  .action {\n    display: none;\n\n    span {\n      color: deepskyblue;\n      cursor: pointer;\n\n      &:first-child {\n        margin-right: 4px;\n      }\n    }\n  }\n\n  &:hover {\n    background: #f4f4f4;\n\n    > .action {\n      display: block;\n    }\n  }\n\n  //&:first-child {\n  //  border-top: 1px solid #ddd;\n  //}\n\n  &.editing {\n    background: #fff3d2\n  }\n\n  > .editing, > .text {\n    padding: 0 8px;\n    flex: 1;\n  }\n\n  > .editing {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n"]);return ae=function(){return t},t}var oe=N.a.div(ae()),re=N.a.input(ne()),ie=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).updateTomato=function(){var t=Object(l.a)(p.a.mark((function t(e){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.put("tomatoes/".concat(a.props.tomato.id),e);case 3:n=t.sent,a.props.updateTomato(n.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),a.editTomato=function(){a.setState({editing:!0})},a.onKeyUp=function(t){13===t.keyCode&&""!==a.state.editText&&(a.updateTomato({description:a.state.editText}),a.setState({editing:!1}))},a.onTomato=function(){a.updateTomato({description:a.state.editText}),a.setState({editing:!1})},a.state={editText:a.props.tomato.description,editing:!1},a}return Object(j.a)(n,[{key:"render",value:function(){var t,e,n,o=this;t=this.props.tomato.created_at,e=this.props.tomato.ended_at,n=this.state.editing?Object(a.jsxs)("div",{className:"action",children:[Object(a.jsx)("span",{onClick:this.onTomato,children:"\u63d0\u4ea4"}),Object(a.jsx)("span",{onClick:function(){return o.setState({editing:!1})},children:"\u53d6\u6d88"})]}):Object(a.jsxs)("div",{className:"action",children:[Object(a.jsx)("span",{onClick:function(){return o.setState({editing:!0})},children:"\u7f16\u8f91"}),Object(a.jsx)("span",{onClick:function(){return o.updateTomato({aborted:!0})},children:"\u5220\u9664"})]});var r=Object(a.jsx)(re,{type:"text",value:this.state.editText,onChange:function(t){return o.setState({editText:t.target.value})},onKeyUp:this.onKeyUp}),i=Object(a.jsx)("span",{className:"text",onDoubleClick:this.editTomato,children:this.props.tomato.description}),s=ct()({TomatoItem:!0,editing:this.state.editing});return Object(a.jsxs)(oe,{className:s,children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:"time",children:[_t()(t).format("HH:mm"),"-",_t()(e).format("HH:mm")]}),Object(a.jsx)("span",{children:this.state.editing?r:i})]}),n]})}}]),n}(r.a.Component),se={updateTomato:It,editTomato:function(t){return{type:$,payload:t}}},ce=Object(W.b)((function(t,e){return Object(E.a)({tomatoes:t.tomatoes},e)}),se)(ie);function de(){var t=Object(x.a)(["\n  margin-bottom: 100px;\n  max-height: 500px;\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n  .dailyTodos {\n    padding: 16px;\n    border: 1px solid #DDD;\n    border-radius: 4px;\n    margin-bottom: 8px;\n    display: flex;\n\n    .summary {\n      width: 100px;\n      margin-right: 8px;\n\n      .date {\n        span:first-child {\n          margin-right: 4px;\n          color: #222222;\n        }\n\n        span:last-child {\n          color: #888;\n          font-size: 12px;\n        }\n      }\n\n      .finishedCount {\n        font-size: 14px;\n        color: #888;\n      }\n    }\n\n    .todoList {\n      flex: 1;\n    }\n  }\n"]);return de=function(){return t},t}var ue=N.a.div(de()),pe=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this,e=this.finishedDates.map((function(e){return Object(a.jsxs)("div",{className:"dailyTodos",children:[Object(a.jsxs)("div",{className:"summary",children:[Object(a.jsx)("p",{className:"date",children:Object(a.jsx)("span",{children:e})}),Object(a.jsxs)("p",{className:"finishedCount",children:["\u5b8c\u6210\u4e86",t.dailyFinishedTomato[e].length,"\u4e2a\u756a\u8304"]})]}),Object(a.jsx)("div",{className:"todoList",children:t.dailyFinishedTomato[e].map((function(t){return Object(a.jsx)(ce,{tomato:t},t.id)}))})]},e)}));return Object(a.jsx)(ue,{children:0!==this.finishedTomato.length?e:Object(a.jsx)(jt.a,{})})}},{key:"finishedTomato",get:function(){return this.props.tomatoes.filter((function(t){return t.description&&t.ended_at&&!t.aborted}))}},{key:"dailyFinishedTomato",get:function(){return Ft.a.groupBy(this.finishedTomato,(function(t){return _t()(t.ended_at).format("YYYY-MM-DD")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTomato).sort((function(t,e){return Date.parse(e)-Date.parse(t)}))}}]),n}(r.a.Component),le=Object(W.b)((function(t,e){return Object(E.a)({tomatoes:t.tomatoes},e)}))(pe),he=n(127),je=n(124),fe=function(t){var e=t.option,n=Object(o.useRef)(null),r=Object(o.useRef)(null);return Object(o.useEffect)((function(){n.current.style.width="860px",n.current.style.height="300px",r.current=je.a(n.current,"white")}),[]),Object(o.useEffect)((function(){r.current.setOption(e)}),[e]),Object(a.jsx)("div",{ref:n})};function be(){var t=Object(x.a)(["\n  margin-bottom: 20px;\n >span{\n   margin-left: 20px;\n   margin-right: 5px;\n }\n"]);return be=function(){return t},t}var xe=N.a.div(be()),me=Rt.a.TabPane,Oe=Object(W.b)((function(t,e){return Object(E.a)({todos:t.todos,tomatoes:t.tomatoes},e)}))((function(t){var e,n=t.todos,r=t.tomatoes,i=function(){return Ft.a.groupBy(r.filter((function(t){return t.description&&t.ended_at&&!t.aborted})),(function(t){return _t()(t.ended_at).format("YYYY-MM-DD")}))},s=function(){return Ft.a.groupBy(n.filter((function(t){return t.completed&&!t.deleted})),(function(t){return _t()(t.updated_at).format("YYYY-MM-DD")}))},c=_t()().format("YYYY-MM"),d=Object(o.useState)(c),u=Object(he.a)(d,2),p=u[0],l=u[1],h=function(t){l(t.target.value)},j=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"];28===_t()(p).daysInMonth()?e=j:29===_t()(p).daysInMonth()?e=[].concat(j,["29"]):30===_t()(p).daysInMonth()?e=[].concat(j,["29","30"]):31===_t()(p).daysInMonth()&&(e=[].concat(j,["29","30","31"]));for(var f=[],b=1;b<=_t()(p).daysInMonth();b++){var x=void 0;x=b<10?"".concat(p,"-0").concat(b):"".concat(p,"-").concat(b),void 0===s()[x]?f.push(0):f.push(s()[x].length)}for(var m=[],O=1;O<=_t()(p).daysInMonth();O++){var v=void 0;v=O<10?"".concat(p,"-0").concat(O):"".concat(p,"-").concat(O),void 0===i()[v]?m.push(0):m.push(i()[v].length)}var g={title:{show:!0,text:"\u672c\u6708Todo\u8868",left:375},xAxis:{name:"\u5929\u6570",type:"category",data:e},tooltip:{show:!0},yAxis:{name:"Todo\u5b8c\u6210\u6570",type:"value"},series:[{data:f,type:"line"}]},y={title:{show:!0,text:"\u672c\u6708\u756a\u8304\u8868",left:375},xAxis:{name:"\u5929\u6570",type:"category",data:e},tooltip:{show:!0},yAxis:{name:"\u756a\u8304\u5b8c\u6210\u6570",type:"value"},series:[{data:m,type:"line"}]};return Object(a.jsx)("div",{children:Object(a.jsxs)(Rt.a,{defaultActiveKey:"1",children:[Object(a.jsxs)(me,{tab:"Todo\u7edf\u8ba1",children:[Object(a.jsxs)(xe,{children:[Object(a.jsx)("span",{children:"\u5f53\u524d\u6708\u4efd"}),Object(a.jsx)("input",{type:"month",value:p,onChange:h})]}),Object(a.jsx)(fe,{option:g})]},"1"),Object(a.jsxs)(me,{tab:"\u756a\u8304\u7edf\u8ba1",children:[Object(a.jsxs)(xe,{children:[Object(a.jsx)("span",{children:"\u5f53\u524d\u6708\u4efd"}),Object(a.jsx)("input",{type:"month",value:p,onChange:h})]}),Object(a.jsx)(fe,{option:y})]},"2")]})})})),ve=n.p+"static/media/statistics.78e791fe.svg",ge=n.p+"static/media/todo.ca8eb581.svg",ye=n.p+"static/media/Tomato.a99edb81.svg";function Te(){var t=Object(x.a)(["\n  >p{\n    margin: 0;\n  }\n  .res{\n    font-size: 12px;\n    line-height: 12px;\n    color: #999;\n  }\n"]);return Te=function(){return t},t}function we(){var t=Object(x.a)(["\n  border: 1px solid #e4e4e4;\n  display: flex;\n  min-height: 90px;\n  cursor: pointer;\n  box-shadow: 0 2px 0 hsl(0deg 0% 88% / 20%);\n  justify-content: center;\n  align-items: center;\n\n  > img {\n    width: 60px;\n    height: 60px;\n    margin-right: 10px;\n  }\n"]);return we=function(){return t},t}function ke(){var t=Object(x.a)(["\n  ul {\n    display: flex;\n\n    li {\n      flex: 1;\n    }\n  }\n"]);return ke=function(){return t},t}var Ce=N.a.div(ke()),De=N.a.li(we()),Ne=N.a.div(Te()),Ie=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).state={activeId:-1},a}return Object(j.a)(n,[{key:"toggleActivePane",value:function(t){this.state.activeId!==t&&this.setState({activeId:t})}},{key:"render",value:function(){return Object(a.jsxs)(Ce,{children:[Object(a.jsxs)("ul",{children:[Object(a.jsxs)(De,{className:0===this.state.activeId?"active":"",onClick:this.toggleActivePane.bind(this,0),children:[Object(a.jsx)("img",{src:ve,alt:""}),"\u7edf\u8ba1"]}),Object(a.jsxs)(De,{className:1===this.state.activeId?"active":"",onClick:this.toggleActivePane.bind(this,1),children:[Object(a.jsx)("img",{src:ye,alt:""}),Object(a.jsxs)(Ne,{children:[Object(a.jsx)("p",{children:"\u756a\u8304\u5386\u53f2"}),Object(a.jsxs)("p",{className:"res",children:["\u7d2f\u8ba1\u5b8c\u6210",this.finishedTomatoes.length,"\u4e2a\u756a\u8304"]})]})]}),Object(a.jsxs)(De,{className:2===this.state.activeId?"active":"",onClick:this.toggleActivePane.bind(this,2),children:[Object(a.jsx)("img",{src:ge,alt:""}),Object(a.jsxs)(Ne,{children:[Object(a.jsx)("p",{children:"Todo\u5386\u53f2"}),Object(a.jsxs)("p",{className:"res",children:["\u7d2f\u8ba1\u5b8c\u6210",this.finishedTodos.length,"\u4e2aTodo"]})]})]})]}),0===this.state.activeId?Object(a.jsx)(Oe,{}):null,1===this.state.activeId?Object(a.jsx)(le,{}):null,2===this.state.activeId?Object(a.jsx)(ee,{}):null]})}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(t){return t.completed&&!t.deleted}))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(t){return t.description&&t.ended_at&&!t.aborted}))}}]),n}(r.a.Component),Me=Object(W.b)((function(t,e){return Object(E.a)({todos:t.todos,tomatoes:t.tomatoes},e)}))(Ie),_e=n.p+"static/media/tomatoes.8fd027d3.svg";function Ye(){var t=Object(x.a)(["\n  height: 35px;\n"]);return Ye=function(){return t},t}function Ae(){var t=Object(x.a)(["\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 0 16px;\n\n  > header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n    padding: 16px 0;\n  }\n\n  > main {\n    padding: 16px 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n  }\n"]);return Ae=function(){return t},t}var Se=N.a.div(Ae()),Pe=N.a.img(Ye()),Ee=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this,t)).getMe=Object(l.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.get("me");case 2:e=t.sent,a.setState({user:e.data});case 4:case"end":return t.stop()}}),t)}))),a.getTodos=Object(l.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.get("todos");case 3:e=t.sent,n=e.data.resources.map((function(t){return Object.assign({},t,{editing:!1})})),a.props.initTodos(n),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),a.getTomatoes=Object(l.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.get("tomatoes");case 3:e=t.sent,a.props.initTomatoes(e.data.resources),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),a.state={user:{}},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=Object(l.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMe();case 2:return t.next=4,this.getTodos();case 4:return t.next=6,this.getTomatoes();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)(Se,{className:"HomePage",children:[Object(a.jsxs)("header",{children:[Object(a.jsx)(Pe,{src:_e,alt:""}),Object(a.jsx)(L,{name:this.state.user&&this.state.user.account})]}),Object(a.jsxs)("main",{children:[Object(a.jsx)(Wt,{}),Object(a.jsx)(mt,{})]}),Object(a.jsx)(Me,{})]})}}]),n}(r.a.Component),Fe={initTodos:tt,initTomatoes:function(t){return{type:X,payload:t}}},Ue=Object(W.b)((function(t,e){return Object(E.a)({},e)}),Fe)(Ee);var He=function(){return Object(a.jsx)(c.a,{history:k,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(d.a,{exact:!0,path:"/login",component:Y}),Object(a.jsx)(d.a,{exact:!0,path:"/signup",component:P}),Object(a.jsx)(d.a,{exact:!0,path:"/",component:Ue}),Object(a.jsx)(d.a,{exact:!0,path:"/todoHistory",component:ee}),Object(a.jsx)(d.a,{exact:!0,path:"/tomatoHistory",component:le}),Object(a.jsx)(d.a,{exact:!0,path:"/charts",component:Oe})]})})},Ke=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),o(t),r(t),i(t)}))},ze=n(65),Be=n(71),Le=Object(ze.b)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case J:return[e.payload].concat(Object(Be.a)(t));case q:return Object(Be.a)(e.payload);case G:return t.map((function(t){return t.id===e.payload.id?e.payload:t}));case V:return t.map((function(t){return t.id===e.payload?Object.assign({},t,{editing:!0}):Object.assign({},t,{editing:!1})}));default:return t}},tomatoes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Q:return[e.payload].concat(Object(Be.a)(t));case X:return Object(Be.a)(e.payload);case Z:return t.map((function(t){return t.id===e.payload.id?e.payload:t}));case $:return t.map((function(t){return t.id===e.payload?Object.assign({},t,{editing:!0}):Object.assign({},t,{editing:!1})}));default:return t}}}),We=Object(ze.c)(Le);s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(W.a,{store:We,children:Object(a.jsx)(He,{})})}),document.getElementById("root")),Ke()}},[[162,1,2]]]);
//# sourceMappingURL=main.a528417a.chunk.js.map